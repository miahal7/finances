$(document).ready(function () {
    //$("#new-transaction-btn, #next-month-btn, #prev-month-btn").button();

    $("#trans-tab").addClass('active');

    $("#prev-month-btn").click(function(){
        changeMonth($("#prev-month").val(), 'right');
    });

    $("#next-month-btn").click(function(){
        changeMonth($("#next-month").val(), 'left');
    });

    $("#new-transaction-btn").click(function(){
//        # GET / transactions / new
        $.ajax({
            url:'transactions',
           // data:{ ledger_date:ledger_month },
            method:"POST",
            success:function (data) {
                alert("new item created");
               // slideOnX($("#content-inner"), $("#content-inner-2"), html, direction);
//            changeHeaderArt(month);
            }
        });
    });
});

function changeMonth(ledger_month, direction){
    var month = new Date(ledger_month).getMonth() + 1;

    $.ajax({
        url: 'transactions',
        data: { ledger_date: ledger_month },
        method: "GET",
        success: function(html){
            slideOnX($("#content-inner"), $("#content-inner-2"), html, direction);
//            changeHeaderArt(month);
        }
    });
}

// Moves a div on X axis out of the view and replaces it with another div, scrolling it into the view
// slideOut   -> the content to be removed from view
// slideIn    -> the content that will replace the removed content
// data       -> the that will be rendered in slideIn
// direction  -> the direction in which the animation will flow (left or right)
function slideOnX(slideOut, slideIn, data, direction){
    var slideDistance = (direction == 'left') ? -$(window).width() : $(window).width();
    var placeholder;

    /*Background animations*/
//    var contentBgWidth = parseInt($("#content-bg").css('marginRight').replace(/[A-Za-z]/g, '')) + 20;
//    alert(contentBgWidth);
//    $("#content-bg").animate({ left: contentBgWidth }, 500);


    // if slideOut is empty then replace it with slideIn and vise versa
    if (slideOut.html() == "") {
        placeholder = slideIn;
        slideIn = slideOut;
        slideOut = placeholder;
    }

    // Move the content div that is displayed out of the view
    // then delete its contents.
    slideOut.animate({ left:slideDistance }, 500, function () {
        slideOut.html("");
    });

    // Move the empty content div to the opposite side of the screen to
    // and prepare it for a slide in animation.
    slideIn.animate({ left:-slideDistance }, 500, function () {
        slideIn.html(data);
        transTblInit();
        slideIn.show();
    });

    // Slide in the newly created content div
    slideIn.animate({ left:0}, 500);
}




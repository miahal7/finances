// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require jquery.dataTables.min.js
//= require jquery-ui-1.8.21.custom.min.js
//= require modernizr-2.5.3.min.js
//= require jEditable.js
// require disable-jquery-mobile-ui.js
// require jquery.mobile-1.1.0.min.js
// require_tree .

$(document).ready(function () {

    /*the class determines which way the page transitions FROM*/
    $(".left, .right, .up, .down").click(function(){

//        $(".content-inner").animate({
//            opacity: 0,
//            left: '+=1000'
//
//        });

    });


    $(".nav-tab").click(function () {
        activateTab(this);
    });

    $('.editable').each(function () {
        $(this).editable('transactions/' + getTransactionId(this), {
            type:'text',
            method:'PUT',
            name:$(this).attr('name'),
            tooltip:'Click to edit...Enter to save'
        })
    });



    $('table tbody td input').live('focus', function (e) {
        $(this).select();
    });

    $('table tbody td.ui-datepicker-inline input').live('focus', function (e) {
        $(this).datepicker({
            dateFormat:'yy-mm-dd'
        }).datepicker("show");
    });

    $('table tbody td input').live('blur', function (e) {
        return false;
    });

    $('table tbody td.ui-datepicker-inline input').live('change', function (e) {
        $(this).parents("form").submit();
    });

    var oTable = $('table').dataTable({
        "bJQueryUI":true,
        "asStripeClasses":[ 'table-odd', 'table-even' ],
        "aoColumnDefs":[
            { "sClass":'ui-datepicker-inline', "aTargets":[ 6 ] }
        ]
    });
});

/*Each tr element has an id of '<tr element name>_<transaction id>'.
* This function removes the prepending '<tr element name>_' from
* the element id, returning only the transaction id*/
function getTransactionId(tdObj){
    var id = $(tdObj).attr('id');
    id = id.substring(id.indexOf("_") + 1, id.length);
    return id;
}

function activateTab(tabObj) {
    $(tabObj).addClass('active');
}